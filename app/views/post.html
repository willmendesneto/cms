<section class='post' ng-init='init()'>

    <form name="postForm" nonvalidate ng-show="contentLoaded">

      <!-- TODO: Convert this DIV to a custom directive -->
      <div class="error-summary bg-warning"
        ng-show="postForm.$submitted && postForm.$invalid">
          <div ng-show="postForm.hat.$invalid">O chapéu é obrigatório.</div>
          <div ng-show="postForm.title.$invalid">O título é obrigatório.</div>
          <div ng-show="postForm.abstract.$invalid">O abstrato é obrigatório.</div>
          <div ng-show="postForm.menu_tag.$invalid">Escolha uma opção de menu.</div>
          <div ng-show="postForm.imgFile.$invalid">A imagem de capa é obrigatória.</div>
      </div>

      <section class="title">
        <section class='inputs'>
          <input type="text" name='hat' class="post-hat-input" ng-model="post.content.meta.hat" placeholder="Informe o chapéu" required/>
          <input type="text" name='title' class="post-title-input" ng-model="post.content.meta.title" placeholder="Informe o título" required />
          <textarea msd-elastic  name='abstract' class="post-abstract" ng-model="post.content.meta.support_line" placeholder="Informe o abstrato" required></textarea>
        </section>
        <section class='form-horizontal buttons'>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <input type="button"  class="btn btn-warning" value="Publicar"  ng-click="publish(post, postForm)" />
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <a href="#/posts" class="btn btn-default">Voltar</a>
            </div>
          </div>
        </section>

      <section>
        <div class="sessions form-horizontal">
          <div class="form-group">
            <label for="menu-tag" class="col-sm-3 control-label">Menu: </label>
            <div class="col-sm-9">

              <select name="menu_tag" ng-model="menuTag" ng-options="opt for opt in menuTagOptions" class="form-control" required>
                <option value="">-- Nenhum --</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="section" class="col-sm-3 control-label">Sessão: </label>
            <div class="col-sm-9">
              <select ng-model="section" ng-options="opt.label for opt in sectionOptions" class="form-control">
                <option value="">-- Nenhuma --</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="label" class="col-sm-3 control-label">Gênero: </label>
            <div class="col-sm-9">
              <select ng-model="label" ng-options="opt.label for opt in labelOptions" class="form-control">
                <option value="">-- Nenhuma --</option>
              </select>
            </div>
          </div>

          <div class="form-group">
          <label for="imgFile" class="col-sm-2 control-label">Capa: </label>
            <input name="imgFile" ng-model="imagesHD" type='text'  class="form-control" required/><br/>
            <img id='coverImage' class="img-thumbnail" ng-src="{{imagesHD}}" alt="{{imagesHD}}" ng-show=imagesHD />
          </div>

          <div class="form-group">
            <tags-input ng-model="post.tags" class='tag-input' placeholder='Adicione uma Tag'>
            </tags-input>
          </div>

          <div ng-include="'views/postimages.html'"></div>
        </div>

        <div class='editor'>
          <textarea ck-editor ng-model="post.content.text"></textarea>
        </div>
      </section>
    </form>

  <div class="datapreview" style="display:none">
    <pre>{{ post.convertContentToJekyllData() }}</pre>
  </div>
</section>
